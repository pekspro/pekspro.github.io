<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Preparing for 2038 | PEK’s developer blog</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Preparing for 2038" />
<meta name="author" content="PEK" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="When I am writing this, it is 17 years until the 19:th of January 2038. This is the date when systems will run out of seconds." />
<meta property="og:description" content="When I am writing this, it is 17 years until the 19:th of January 2038. This is the date when systems will run out of seconds." />
<link rel="canonical" href="https://pekspro.github.io/posts/preparing-for-2038" />
<meta property="og:url" content="https://pekspro.github.io/posts/preparing-for-2038" />
<meta property="og:site_name" content="PEK’s developer blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-01-24T00:00:00+01:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Preparing for 2038" />
<script type="application/ld+json">
{"description":"When I am writing this, it is 17 years until the 19:th of January 2038. This is the date when systems will run out of seconds.","headline":"Preparing for 2038","dateModified":"2021-01-24T00:00:00+01:00","datePublished":"2021-01-24T00:00:00+01:00","url":"https://pekspro.github.io/posts/preparing-for-2038","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://pekspro.github.io/posts/preparing-for-2038"},"author":{"@type":"Person","name":"PEK"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://pekspro.github.io/feed.xml" title="PEK's developer blog" />
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">PEK&#39;s developer blog</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about">About</a><a class="page-link" href="/categories">Categories</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Preparing for 2038</h1>
    <p class="post-meta"><time class="dt-published" datetime="2021-01-24T00:00:00+01:00" itemprop="datePublished">
        Jan 24, 2021
      </time>
        •  Categories: 
        <a href="/categories#general">General</a>
      </p>
  </header>
  <div class="post-content e-content" itemprop="articleBody">
    <p>When I am writing this, it is 17 years until the 19:th of January 2038. This is
the date when systems will run out of seconds.</p>

<h2 id="the-problem">The problem</h2>

<p>The 1:st of January 1970 the first second happened - at least
according in the digital world. From this date many systems have counted the
number of seconds that has passed. This has become a
<a href="https://en.wikipedia.org/wiki/Year_2038_problem">de factor standard</a> for time
measurement. 19:th of January 2038 at 03:14 the counting will reach
2<sup>31</sup> seconds. And then some systems will time travel back to 13:th of
December 1901. It will be a strange day for systems measuring time in 32 bits.</p>

<h2 id="the-solution">The solution</h2>

<p>The simplest solution to this problem is to use 64 bites instead. In most
servers and ordinary computers this is already the case. But this not enough.</p>

<p>In embedded systems, that I have worked a lot with, things are different. When
you are working with this you are lucky if you get to work with a mature
operating system like Linux, on other cases you have no operating system at all.</p>

<p>Embedded system is normally quite small and do not use much memory, at least not
compared with a computer. So, using a 32-bit operating system is not uncommon.
These 32 bits is referencing to how much memory that could be addressed (4 GB
that is), the operating system could still use 64-bits for time measurement.
This is not a contradiction. So, you may think that 32-bit Linux has supported
this for a long time. Not really.</p>

<p>Full support for this wasn’t released until
<a href="https://lkml.org/lkml/2020/1/29/355">version 5.6</a>,
and this wasn’t released until
<a href="https://en.wikipedia.org/wiki/Linux_kernel_version_history">March 2020</a>, about a
year ago when I am writing this.</p>

<p>When a new Linux version is released it takes plenty of time before this affects
embedded system. In my experience when you have an operating system that works
you rarely change it. You just change the software you build on top of it.
Updated operating systems are often only used when the hardware is changed.</p>

<p>Problems could also occur before 2038. For instance, if you have something that
should expire 2040, maybe an SSL certificate or some kind of permission, it
might already be considered to be expired. It all depends how it is implemented.</p>

<p>But there are more things that could fail. Protocols, like the Network Time
Protocol (NTP), also has problems that starts already 2036 (at least earlier
versions).</p>

<p>I think this is a quite big problem. Many of the embedded systems that I have
working with has been used more than 15 years after they were originally
designed. These have been part of large and expensive units that is expected to
have a long lifetime. And I am guessing that it is such units, like trains,
power plants, satellites and other things that will has the most problems with
this. Actually, NASA lost connection with the
<a href="https://en.wikipedia.org/wiki/Deep_Impact_(spacecraft)#Contact_lost_and_end_of_mission">space craft Deep Impact</a>
probably due a similar problem.</p>

<p>If you are developing software, at least have this in mind. When you are writing
unit tests that involves dates, try to use date on both sides of 2038. Doing
some smoke test every year with a date far in the future would also be greater.
Even if you are not able to solve all problems, just knowing that they exist is
very valuable.</p>

<p>If you are working with embedded systems and use to work with 32 bit timestamps
you may be able to tackle this problem by using an offset. When the actual time
is 2030, you may internally say that the year 2000. An offset of 28 years might
be good, because then both leap years and weekdays will be inline.</p>

<h2 id="summary">Summary</h2>

<p>It might be easy to think that this is not important now, but I must disagree.
You really should to this into consideration, especially when you are working
with a new system where it is cheap to resolve this. Patching this afterwards is
complicated and expensive. And as I said earlier, things could go wrong before
2038 so the following years will be interesting.</p>

  </div>
  
    
  
  <a class="u-url" href="/posts/preparing-for-2038" hidden></a>
</article>

<script src="/assets/javascript/copybutton.js"></script>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
        <ul class="contact-list">
          <li class="p-name">PEK</li>
          <li><a class="u-email" href="mailto:"></a></li>
        </ul>
      </div>
      <div class="footer-col">
        <p>Interesting problems with interesting solutions.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/pekspro" title="pekspro"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
